{"version":3,"sources":["webpack:///external \"vendor_d150f6212419702afdcd\"","webpack:///./src/hooks/useGlobalSystemInfo.ts","webpack:///./src/api/platform.ts","webpack:///./src/hooks/useChannelInfo.ts","webpack:///./src/libs/auth.ts","webpack:///./src/libs/request.ts","webpack:///./src/api/user.ts","webpack:///./src/hooks/useGlobalUserInfo.ts","webpack:///./src/app.tsx","webpack:///./src/plugins/composition-api.ts","webpack:///./src/plugins/router.ts","webpack:///./src/components/Dialog/comp/index.tsx","webpack:///./src/components/Toast/comp/index.tsx","webpack:///./src/components/Toast/index.ts","webpack:///./src/components/index.js","webpack:///./src/components/Dialog/index.ts","webpack:///./src/libs/generateErrorMessage.ts","webpack:///./src/plugins/appLoading.ts","webpack:///./src/main.ts","webpack:///./src/libs/utils.ts","webpack:///external \"Vue\"","webpack:///./src/hooks/useRouter.ts","webpack:///./src/libs/token.ts","webpack:///./src/router/routes.ts","webpack:///./src/router/index.ts","webpack:///./global.conf.js","webpack:///delegated ./node_modules/axios/index.js from dll-reference vendor_d150f6212419702afdcd"],"names":["module","exports","vendor_d150f6212419702afdcd","wechatUA","flag","ua","navigator","userAgent","toLowerCase","getPlatformInfoApi","match","toLocaleLowerCase","a","request","get","res","Promise","resolve","data","reject","ChannelInfoSymbol","Symbol","state","appid","key","qrcode","hasInit","isHandlingInit","initChannelInfoInfo","sleep","result","Object","assign","console","warn","reloadChannelInfoInfo","useChannelInfoHook","getState","JSON","parse","stringify","getAuthToken","GlobalConf","IS_DEBUG","DEBUG_USER_ID","platformKey","tokenHandle","getToken","beforeRequestConfigHandle","configOri","options","config","token","headers","Authorization","handling401Timer","err401Handle","clearTimeout","setTimeout","router","useRouter","clearToken","clearAuthToken","name","query","params","fullPath","path","currentRoute","replace","encodeURIComponent","axios","create","baseURL","onBeforeRequestSendHandler","useGlobalUserInfoHook","getUserInfoState","getChannelInfoState","userInfo","channelInfoState","configInstead","u","id","p","interceptors","use","response","value","error","status","getUserInfoApi","globalUserInfoSymbol","nickname","avatar","invite_code","subscribe","initUserInfo","reloadUserInfo","defineComponent","setup","props","context","reactive","provide","useRouterProvider","root","$router","Vue","VueCompositionApi","VueRouter","show","Boolean","title","String","okText","cancelText","type","content","eventOk","Function","eventCancel","isClosing","visible","cancel","ok","onTouchmove","e","preventDefault","watch","newValue","RenderBtnCancel","extClassName","RenderBox","slots","showClose","showIcon","eventClose","disableBgClose","close","instanceId","instanceList","removeInstance","compInstance","$destroy","document","body","removeChild","$el","err","removeInstanceById","i","len","length","inst","el","createElement","appendChild","ExtendVueComp","extend","Comp","instId","mergeOptions","forEach","hasOwnProperty","call","undefined","generateMergeOptions","$mount","generateToastInstByType","baseOptions","payload","duration","durationToClose","compInstanceInfo","push","baseComps","baseCompsServices","$Dialog","complete","$Toast","loading","byError","message","resError","errMsg","code","url","msg","generateErrorMessage","join","closeAll","instInfo","install","vue","keys","index","component","prototype","_mountedTimer","_mountedLoad","_appSetMountedHandle","dom","getElementById","style","display","MixinMounted","mounted","this","$route","meta","mounted_once","mixin","render","h","App","routerInst","RouterSymbol","currentRouteExtraInfo","Router","beforeEach","to","from","next","window","localStorage","tokenKey","isDebug","getDebugToken","getDebugTokenFn","getTokenFn","isHandling","init","initDebugToken","initWxToken","getTokenInfo","tokenInfo","tokenRes","tokenItem","find","item","tokenItemIndex","findIndex","splice","setStorageItem","removeStorageItem","storage","removeItem","getStorageItem","localTokenInfo","token_expire","Date","tokenExpire","tokenItemIdx","saveValue","setItem","getItem","saveToken","noNeedAuth","redirect","routes","onBeforeRouterEnter","afterEach","defineProperty","APP","APP_ID","APP_KEY","PROJECT_INFO","NAME","DESC","LOGO","SHARE_INFO_BASE","desc","link","imgUrl","BASE_URL","JS_API_LIST","__webpack_require__"],"mappings":"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","file":"js/app.086e284207b2ec450a56.js","sourcesContent":["module.exports = vendor_d150f6212419702afdcd;","interface IUseGlobalSystemInfoState {\n  isEnvPro: boolean;\n  ua: string;\n  isInWx: boolean;\n}\n\nconst ua = navigator.userAgent.toLowerCase();\nconst isInWechat = () => {\n  const wechatUA = ua.match(/MicroMessenger/i);\n  let flag = false;\n  if (wechatUA && wechatUA[0].toLocaleLowerCase() === 'micromessenger') {\n    flag = true;\n  }\n  return flag;\n};\n\nconst state: IUseGlobalSystemInfoState = {\n  isEnvPro: process.env.NODE_ENV === 'production',\n  ua,\n  // eslint-disable-next-line\n  isInWx: isInWechat(),\n};\n\nconst useGlobalSystemInfoHook = () => {\n  const result = {\n    state,\n    getState: () => JSON.parse(JSON.stringify(state)) as IUseGlobalSystemInfoState,\n  };\n  return result;\n};\n\nexport default useGlobalSystemInfoHook;\n","import request from '../libs/request';\n\nexport interface IGetPlatformInfoData {\n  appid: string;\n  key: string;\n  qrcode: string;\n}\nconst getPlatformInfoApi = async () => {\n  try {\n    const res = await request.get<IGetPlatformInfoData>('/platform/info');\n    // res.data.is_find = true;\n    return Promise.resolve(res.data);\n  } catch (err) {\n    return Promise.reject(err);\n  }\n};\n\nexport { getPlatformInfoApi };\n","import { provide, inject, InjectionKey, reactive } from '@vue/composition-api';\nimport { getPlatformInfoApi, IGetPlatformInfoData } from '../api/platform';\nimport { sleep } from '../libs/utils';\n\ninterface IChannelInfo {\n  state: IGetPlatformInfoData;\n}\n\nconst ChannelInfoSymbol: InjectionKey<IChannelInfo> = Symbol('ChannelInfo');\nlet state: IGetPlatformInfoData = {\n  appid: '',\n  key: 'default',\n  qrcode: '',\n};\nlet hasInit = false;\nlet isHandlingInit = false;\n\nconst initChannelInfoInfo: () => Promise<void> = async () => {\n  if (isHandlingInit) {\n    await sleep(100);\n    return initChannelInfoInfo();\n  }\n\n  isHandlingInit = true;\n\n  if (!hasInit) {\n    try {\n      const result = await getPlatformInfoApi();\n      Object.assign(state, result);\n\n      hasInit = true;\n    } catch (err) {\n      // CANDO: 最好做一下处理\n      console.warn(err);\n    } finally {\n      isHandlingInit = false;\n    }\n  }\n\n  return Promise.resolve();\n};\n\nconst reloadChannelInfoInfo = () => {\n  hasInit = false;\n  initChannelInfoInfo();\n};\n\nexport const useChannelInfoProvider = () => {\n  state = reactive(state);\n\n  provide(ChannelInfoSymbol, { state });\n};\n\nexport const useChannelInfoInjection = () => {\n  const ChannelInfo = inject(ChannelInfoSymbol);\n\n  if (!ChannelInfo) {\n    throw new Error('请先注册 Provider');\n  }\n\n  return ChannelInfo;\n};\n\nconst useChannelInfoHook = () => {\n  const res = {\n    state,\n    hasInit,\n    initChannelInfoInfo,\n    reloadChannelInfoInfo,\n    getState: () => JSON.parse(JSON.stringify(state)) as IGetPlatformInfoData,\n  };\n  return res;\n};\n\nexport default useChannelInfoHook;\n","import { AxiosRequestConfig } from 'axios';\nimport { ClassUrlHandle } from '@coolban/lib-url';\n\nimport GlobalConf from '@projectRoot/global.conf';\nimport tokenHandle from './token';\nimport { postDebugTokenApi, postTokenApi } from '../api/token';\nimport useRouter from '../hooks/useRouter';\nimport useGlobalSystemInfoHook from '../hooks/useGlobalSystemInfo';\nimport useChannelInfoHook from '../hooks/useChannelInfo';\n\nconst { IS_DEBUG, DEBUG_USER_ID } = GlobalConf;\n\nconst getAuthToken = async (platformKey: string) => tokenHandle.getToken(platformKey);\nconst clearAuthToken = (platformKey: string) => tokenHandle.clearToken(platformKey);\n\nconst initAuthToken = (platformKey: string) => {\n  const { getState: getSystemInfoState } = useGlobalSystemInfoHook();\n  const { getState: getChannelInfoState } = useChannelInfoHook();\n\n  const systemInfo = getSystemInfoState();\n  const channelInfoState = getChannelInfoState();\n\n  const urlHandler = new ClassUrlHandle();\n\n  const code = urlHandler.getSearchValue('code');\n\n  const goWechatAuth = () => {\n    const wechatAuthUrl = urlHandler.getAuthUrl({\n      appId: channelInfoState.appid,\n      redirectUrl: urlHandler.getClearWxAuthLink(),\n      scope: 'snsapi_base',\n    });\n\n    window.location.href = wechatAuthUrl;\n  };\n\n  const options = {\n    isDebug: IS_DEBUG && !systemInfo.isEnvPro,\n    tokenKey: platformKey,\n    getToken: async () => {\n      const i = urlHandler.getSearchValue('i');\n      const o = urlHandler.getSearchValue('o');\n      const requestObj = { i, o, code };\n\n      try {\n        const tokenInfo = await postTokenApi(requestObj);\n        return Promise.resolve(tokenInfo);\n      } catch (error) {\n        const responseStatus = error.response?.status;\n\n        if (responseStatus === 401) {\n          goWechatAuth();\n        }\n        return Promise.reject();\n      }\n    },\n    getDebugToken: () => {\n      const postObj = {\n        id: DEBUG_USER_ID,\n        p: platformKey,\n      };\n      return postDebugTokenApi(postObj);\n    },\n  };\n\n  // STEP: 判断是不是微信内授权\n  if (!IS_DEBUG && systemInfo.isInWx) {\n    // CONDI: 判断有没有 code\n    if (!code) {\n      // CONDI: 没有 code => 进行跳转\n\n      goWechatAuth();\n\n      // STEP: 先暂停跳转\n      // CANDO: 后面优化一下\n      return Promise.reject();\n    }\n  }\n\n  return tokenHandle.init(options);\n};\n\nconst beforeRequestConfigHandle: (\n  configOri: AxiosRequestConfig,\n  options: {\n    platformKey: string;\n  },\n) => Promise<AxiosRequestConfig> = async (\n  configOri = {},\n  options = {\n    platformKey: '',\n  },\n) => {\n  const { platformKey } = options;\n  const config = configOri;\n  const token = await getAuthToken(platformKey);\n\n  // STEP: 获取token\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return Promise.resolve(config);\n};\n\nlet handling401Timer: null | NodeJS.Timeout = null;\n/**\n * @name 401处理\n * @param platformKey 平台名\n * STEPS\n * - 函数防抖处理\n * - 清除本地 token\n * - 跳转到 auth 页面\n */\nconst err401Handle = (platformKey: string) => {\n  if (handling401Timer) {\n    clearTimeout(handling401Timer);\n    handling401Timer = null;\n  }\n\n  handling401Timer = setTimeout(() => {\n    const { router } = useRouter();\n\n    // STEP: 清除本地数据\n    clearAuthToken(platformKey);\n\n    // STEP: 没有注册路由不处理\n    if (!router) return;\n    // FUNC: 获取当前路由信息\n    const getCurrentRouteInfo = () => {\n      const { name, query, params, fullPath, path } = router.currentRoute;\n      return encodeURIComponent(\n        JSON.stringify({\n          name,\n          query,\n          params,\n          fullPath,\n          path,\n        }),\n      );\n    };\n\n    // STEP: 跳转到授权页面\n    if (router.currentRoute.name !== 'Auth') {\n      router.replace({\n        name: 'Auth',\n        query: {\n          currentRoute: getCurrentRouteInfo(),\n        },\n      });\n    }\n  }, 0);\n};\n\nfunction handle401Silent(platformKey: string) {\n  return initAuthToken(platformKey);\n}\n\nexport {\n  initAuthToken,\n  beforeRequestConfigHandle,\n  err401Handle,\n  clearAuthToken,\n  getAuthToken,\n  handle401Silent,\n};\n","import axios, { AxiosError, AxiosRequestConfig } from 'axios';\n\nimport { beforeRequestConfigHandle, err401Handle } from './auth';\nimport useGlobalUserInfoHook from '../hooks/useGlobalUserInfo';\nimport useChannelInfoHook from '../hooks/useChannelInfo';\n\n/**\n * 配置Axios\n * CONDI: 根据是否是APP切换请求地址\n */\nconst request = axios.create({\n  baseURL: '/api/',\n});\n\nconst onBeforeRequestSendHandler = async (config: AxiosRequestConfig) => {\n  const { getState: getUserInfoState } = useGlobalUserInfoHook();\n  const { getState: getChannelInfoState } = useChannelInfoHook();\n\n  const userInfo = getUserInfoState();\n  const channelInfoState = getChannelInfoState();\n\n  // STEP: 授权处理\n  const configInstead = await beforeRequestConfigHandle(config, {\n    platformKey: channelInfoState.key,\n  });\n\n  // STEP: 临时所有接口都加 u 和 p\n  if (!configInstead.params) {\n    configInstead.params = {};\n  }\n  if (!configInstead.params.u) {\n    configInstead.params.u = userInfo.id;\n  }\n\n  if (!configInstead.params.p) {\n    configInstead.params.p = channelInfoState.appid;\n  }\n\n  return configInstead;\n};\n\nconst onResponseError = (error: AxiosError) => {\n  const { getState: getChannelInfoState } = useChannelInfoHook();\n  const channelInfoState = getChannelInfoState();\n\n  const responseStatus = error.response?.status;\n\n  // STEP: 401处理\n  if (responseStatus === 401) {\n    err401Handle(channelInfoState.key);\n  }\n\n  return Promise.reject(error);\n};\n\n// request拦截器\nrequest.interceptors.request.use(onBeforeRequestSendHandler);\n\n// response拦截器\nrequest.interceptors.response.use(value => Promise.resolve(value), onResponseError);\n\nexport default request;\n","import request from '@/libs/request';\n\nexport interface IGetUserInfoApiResData {\n  id: number;\n  nickname: string;\n  avatar: string;\n  // eslint-disable-next-line camelcase\n  invite_code: string;\n  subscribe: boolean;\n}\n\n/**\n * @name API-获取用户信息\n */\nasync function getUserInfoApi(data: object = {}) {\n  const params = data;\n\n  try {\n    const res = await request.get<IGetUserInfoApiResData>('/user/info', {\n      params,\n    });\n    // res.data.subscribe = true;\n    return Promise.resolve(res.data);\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\n\ninterface IGetUserTmpWxQrcodeApiRes {\n  url: string;\n}\n\nconst getUserTmpWxQrcodeApi = async () => {\n  try {\n    const res = await request.get<IGetUserTmpWxQrcodeApiRes>('/user/tmp_wx_qrcode');\n    return Promise.resolve(res.data);\n  } catch (err) {\n    return Promise.reject(err);\n  }\n};\n\nexport { getUserInfoApi, getUserTmpWxQrcodeApi };\n","import { provide, inject, InjectionKey, reactive } from '@vue/composition-api';\nimport { getUserInfoApi, IGetUserInfoApiResData } from '../api/user';\nimport { sleep } from '../libs/utils';\n\ninterface IGlobalUserInfo {\n  state: IGetUserInfoApiResData;\n  initUserInfo(): void;\n}\n\nconst globalUserInfoSymbol: InjectionKey<IGlobalUserInfo> = Symbol('globalUserInfo');\nlet state: IGetUserInfoApiResData = {\n  id: 0,\n  nickname: '',\n  avatar: '',\n  invite_code: '',\n  subscribe: true,\n};\nlet hasInit = false;\nlet isHandlingInit = false;\n\nconst initUserInfo: () => Promise<void> = async () => {\n  if (isHandlingInit) {\n    await sleep(100);\n    return initUserInfo();\n  }\n\n  isHandlingInit = true;\n\n  if (!hasInit) {\n    try {\n      const result = await getUserInfoApi();\n      Object.assign(state, result);\n\n      hasInit = true;\n    } catch (err) {\n      // CANDO: 最好做一下处理\n      console.warn(err);\n    } finally {\n      isHandlingInit = false;\n    }\n  }\n\n  return Promise.resolve();\n};\n\nasync function reloadUserInfo() {\n  const result = await getUserInfoApi();\n  Object.assign(state, result);\n\n  return Promise.resolve();\n}\n\nexport const useGlobalUserInfoProvider = () => {\n  state = reactive(state);\n\n  provide(globalUserInfoSymbol, { state, initUserInfo });\n};\n\nexport const useGlobalUserInfoInjection = () => {\n  const globalUserInfo = inject(globalUserInfoSymbol);\n\n  if (!globalUserInfo) {\n    throw new Error('请先注册 Provider');\n  }\n\n  return globalUserInfo;\n};\n\nconst useGlobalUserInfoHook = () => {\n  const res = {\n    state,\n    hasInit,\n    initUserInfo,\n    reloadUserInfo,\n    getState: () => JSON.parse(JSON.stringify(state)) as IGetUserInfoApiResData,\n  };\n  return res;\n};\n\nexport default useGlobalUserInfoHook;\n","import { defineComponent } from '@vue/composition-api';\nimport { useGlobalUserInfoProvider } from './hooks/useGlobalUserInfo';\nimport { useRouterProvider } from './hooks/useRouter';\nimport { useChannelInfoProvider } from './hooks/useChannelInfo';\n\nimport './app.scss';\n\nexport default defineComponent({\n  name: 'App',\n  setup(props, context) {\n    // 注入全局用户信息\n    useGlobalUserInfoProvider();\n\n    // 注册路由\n    useRouterProvider(context.root.$router);\n\n    // 注册平台信息\n    useChannelInfoProvider();\n\n    return () => (\n      <div id=\"app\">\n        <router-view />\n      </div>\n    );\n  },\n});\n","import Vue from 'vue';\nimport VueCompositionApi from '@vue/composition-api';\n\nVue.use(VueCompositionApi);\n","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\n// STEP: 注册路由插件\nVue.use(VueRouter);\n","import { defineComponent, watch, reactive } from '@vue/composition-api';\n\nimport './index.scss';\n\nexport interface IDialogProps {\n  show?: boolean;\n  title?: string;\n  okText?: string;\n  cancelText?: string;\n  type?: 'confirm' | 'alert';\n  content?: string;\n  eventOk?: (...args: any[]) => any;\n  eventCancel?: (...args: any[]) => any;\n  isClosing?: boolean;\n}\n\nexport default defineComponent({\n  props: {\n    show: Boolean,\n    title: String,\n    okText: String,\n    cancelText: String,\n    type: String,\n    content: String,\n    eventOk: Function,\n    eventCancel: Function,\n    isClosing: Boolean,\n  },\n  setup(props, context) {\n    const state = reactive<{\n      visible: boolean;\n    }>({\n      visible: false,\n    });\n\n    watch(\n      () => props.show,\n      (newValue) => {\n        setTimeout(() => {\n          if (typeof newValue !== 'boolean') return;\n          if (state.visible !== newValue) {\n            state.visible = newValue;\n          }\n        }, 0);\n      },\n    );\n\n    function cancel() {\n      if (props.eventCancel) {\n        props.eventCancel();\n      }\n    }\n\n    function ok() {\n      if (props.eventOk) {\n        props.eventOk();\n      }\n    }\n\n    function onTouchmove(e: Event) {\n      e.preventDefault();\n    }\n\n    // --- Render --- //\n\n    return () => {\n      function RenderBtnCancel(extClassName: string = '') {\n        return (\n          <div class={`com-dialog-button cancel ${extClassName}`} onClick={cancel}>\n            {props.cancelText || '取消'}\n          </div>\n        );\n      }\n\n      const RenderBox = (\n        <div class=\"com-dialog-box\">\n          <div class=\"com-dialog-title\">{props.title || ''}</div>\n\n          {props.content ? (\n            <div class=\"com-dialog-content\" domPropsInnerHTML={props.content} />\n          ) : (\n            <div class=\"com-dialog-content\">{context.slots.default && context.slots.default()}</div>\n          )}\n\n          <div class=\"com-dialog-footer\">\n            {props.type === 'confirm' && RenderBtnCancel('first')}\n\n            <div class=\"com-dialog-button submit\" onClick={ok}>\n              {props.okText || '确定'}\n            </div>\n\n            {props.type === 'confirm' && RenderBtnCancel('second')}\n          </div>\n        </div>\n      );\n\n      return (\n        <div\n          class={`com-dialog ${props.isClosing ? 'fade-leave-active' : ''}`}\n          onTouchmove={onTouchmove}\n        >\n          <div class=\"com-dialog-mask\" />\n          {RenderBox}\n        </div>\n      );\n    };\n  },\n});\n","import { defineComponent, reactive, watch } from '@vue/composition-api';\n\nimport './index.scss';\n\nexport interface IToastProps {\n  show?: boolean;\n  title?: string;\n  content?: string;\n  type?: string;\n  showClose?: boolean;\n  showIcon?: boolean;\n  disableBgClose?: boolean;\n  isClosing?: boolean;\n  eventClose?: (...args: any[]) => any;\n}\n\nexport default defineComponent({\n  props: {\n    show: Boolean,\n    title: String,\n    content: String,\n    type: String,\n    showClose: Boolean,\n    showIcon: Boolean,\n    eventClose: Function,\n    isClosing: Boolean,\n    disableBgClose: Boolean,\n  },\n  setup(props: IToastProps, context) {\n    const state = reactive<{\n      visible: boolean;\n    }>({\n      visible: false,\n    });\n\n    watch(\n      () => props.show,\n      (newValue) => {\n        setTimeout(() => {\n          if (typeof newValue !== 'boolean') return;\n          if (state.visible !== newValue) {\n            state.visible = newValue;\n          }\n        }, 0);\n      },\n    );\n\n    function close() {\n      if (props.eventClose) {\n        props.eventClose();\n      }\n    }\n\n    function onTouchmove(e: Event) {\n      e.preventDefault();\n    }\n\n    return () => (\n      <div>\n        <div\n          // v-show={state.visible}\n          class={`com-toast ${props.isClosing ? 'fade-leave-active' : ''}`}\n          onTouchmove={onTouchmove}\n        >\n          <i\n            class=\"mask\"\n            onClick={() => {\n              if (!props.disableBgClose) {\n                close();\n              }\n            }}\n          />\n          <section\n            class={`box ${!props.showIcon ? 'no-icon' : ''} ${!props.content ? 'no-content' : ''} ${\n              props.type === 'loading' ? 'loading' : ''\n            } ${props.type === 'warn' ? 'warn' : ''} ${props.type === 'error' ? 'error' : ''} ${\n              props.type === 'done' ? 'done' : ''\n            }\n       `}\n          >\n            {props.showIcon && (\n              <i\n                class={`icon ${props.type === 'loading' ? 'base-icon-font-loading' : ''} ${\n                  props.type === 'warn' ? 'base-icon-font-info' : ''\n                } ${props.type === 'error' ? 'base-icon-font-warn' : ''} ${\n                  props.type === 'done' ? \"base-icon-font-done'\" : ''\n                }`}\n              />\n            )}\n            <div class=\"text\">\n              <b class=\"title\">{props.title}</b>\n              {props.content ? (\n                <div class=\"desc\" domPropsInnerHTML={props.content} />\n              ) : (\n                <div class=\"desc\">{context.slots.default && context.slots.default()}</div>\n              )}\n            </div>\n            {props.showClose && (\n              <button class=\"btn-close\" onClick={close}>\n                <i class=\"btn-close-icon base-icon-font-close\" />\n              </button>\n            )}\n          </section>\n        </div>\n      </div>\n    );\n  },\n});\n","/**\n * @name\n * NOTICE\n * - 每次调用生成一个实例\n * CANDO\n * - 支持富文本content\n * - 支持关闭所有实例\n * - 可配置是否再路由切换时消失\n */\n\nimport Vue from 'vue';\n\nimport generateErrorMessage from '@/libs/generateErrorMessage';\n\n// 组件\nimport Comp, { IToastProps } from './comp/index';\n\n// Types\ninterface ICompInstance extends IToastProps, Vue {}\ninterface IToastOptions extends IToastProps {\n  duration?: number;\n}\n\n// Vars\nlet instanceId = 1;\nconst instanceList: { id: number; inst: ICompInstance }[] = [];\n\nfunction removeInstance(compInstance: ICompInstance) {\n  // eslint-disable-next-line no-param-reassign\n  compInstance.show = false;\n  // eslint-disable-next-line no-param-reassign\n  compInstance.isClosing = true;\n  setTimeout(() => {\n    setTimeout(() => {\n      compInstance.$destroy();\n      try {\n        document.body.removeChild(compInstance.$el);\n      } catch (err) {\n        console.warn(err);\n      }\n    }, 600);\n  }, 0);\n} // 清楚实例\n\nfunction removeInstanceById(id: number) {\n  for (let i = 0, len = instanceList.length; i < len; i += 1) {\n    if (instanceList[i].id === id) {\n      removeInstance(instanceList[i].inst);\n      break;\n    }\n  }\n}\n\nfunction generateMergeOptions(options: IToastProps) {\n  const mergeOptions: IToastProps = {\n    show: true,\n  };\n\n  // @ts-ignore\n  ['title', 'content', 'type', 'showClose', 'showIcon', 'disableBgClose'].forEach(\n    // @ts-ignore\n    (key: keyof IToastProps) => {\n      if (Object.hasOwnProperty.call(options, key) && options[key] !== undefined) {\n        // @ts-ignore\n        mergeOptions[key as keyof IToastProps] = options[key];\n      }\n    },\n  );\n\n  return mergeOptions;\n}\n\nfunction defineComponent(options: IToastProps) {\n  // STEP: 创建 div 占位\n  // CANDO: 可以思考如果创建失败的情况\n  const el = document.createElement('div');\n  document.body.appendChild(el);\n\n  const ExtendVueComp = Vue.extend(Comp); // CANDO: 思考为什么 Comp 放这里会被替换掉\n  const compInstance = new ExtendVueComp(ExtendVueComp) as ICompInstance;\n  const instId = instanceId;\n  instanceId += 1;\n\n  // CANDO: 思考更好的方法\n  // STEP: 替换配置\n  const mergeOptions = generateMergeOptions(options);\n  mergeOptions.eventClose = function close() {\n    removeInstanceById(instId);\n    if (options.eventClose) {\n      options.eventClose();\n    }\n  };\n\n  Object.assign(compInstance, mergeOptions);\n\n  // STEP: 挂载组件\n  compInstance.$mount(el);\n\n  return { inst: compInstance, id: instId };\n}\n\nfunction generateToastInstByType(\n  baseOptions = {},\n  payload: string | IToastOptions,\n  duration?: number,\n) {\n  let options: IToastOptions = baseOptions;\n  let durationToClose = -1;\n\n  if (typeof payload === 'string') {\n    options.title = payload;\n  } else {\n    options = Object.assign(options, payload);\n  }\n\n  const compInstanceInfo = defineComponent(options);\n  instanceList.push(compInstanceInfo);\n\n  if (typeof payload === 'object' && Object.hasOwnProperty.call(payload, 'duration')) {\n    durationToClose = payload.duration as number;\n  } else if (duration) {\n    durationToClose = duration;\n  }\n\n  if (durationToClose > 0) {\n    setTimeout(() => {\n      removeInstanceById(compInstanceInfo.id);\n    }, durationToClose);\n  }\n\n  return {\n    close: () => {\n      removeInstanceById(compInstanceInfo.id);\n    },\n  };\n}\n\nconst $toast = {\n  loading(payload: string | IToastOptions, duration?: number) {\n    return generateToastInstByType(\n      {\n        title: '',\n        showIcon: true,\n        type: 'loading',\n        disableBgClose: true,\n      },\n      payload,\n      duration,\n    );\n  },\n  warn(payload: string | IToastOptions, duration?: number) {\n    return generateToastInstByType(\n      {\n        title: '',\n        showIcon: true,\n        type: 'warn',\n      },\n      payload,\n      duration,\n    );\n  },\n  error(payload: string | IToastOptions, duration?: number) {\n    return generateToastInstByType(\n      {\n        title: '',\n        showIcon: true,\n        type: 'error',\n      },\n      payload,\n      duration,\n    );\n  },\n  byError(error: Error) {\n    const { code, url, errMsg } = generateErrorMessage(error);\n\n    return generateToastInstByType(\n      {\n        title: '',\n        showIcon: true,\n        showClose: true,\n        type: 'error',\n      },\n      {\n        title: errMsg,\n        content: [\n          \"<details class='details'>\",\n          \"<summary class='summary'>展开详细错误</summary>\",\n          code ? `<p class='p'>错误代码：${code}</p>` : '',\n          `<p class='p'>错误来源：${url}</p>`,\n          '</details>',\n        ].join(''),\n      },\n    );\n  },\n  close: removeInstanceById,\n  closeAll() {\n    instanceList.forEach((instInfo) => {\n      removeInstance(instInfo.inst);\n    });\n  },\n};\n\nexport default $toast;\n","import Vue from 'vue';\nimport $Dialog from './Dialog/index';\nimport $Toast from './Toast/index';\n\nconst baseComps = {\n  // BasePopPage: () => import(/* webpackChunkName: \"comp_base_pop_vendor\" */ './PopPage/index'),\n  // // eslint-disable-next-line\n  // BasePopBottom: () => {\n  //   return import(/* webpackChunkName: \"comp_base_pop_vendor\" */ './PopBottom/index.vue');\n  // },\n  // // eslint-disable-next-line\n  // BasePopNormal: () => {\n  //   return import(/* webpackChunkName: \"comp_base_pop_vendor\" */ './PopNormal/index.vue');\n  // },\n  // BaseQrcode: () => import(/* webpackChunkName: \"comp_base_pop_vendor\" */ './Qrcode/index.vue'),\n  // BaseButton: () => import(/* webpackChunkName: \"comp_base\" */ './Button/index'),\n  // BaseIcon: () => import(/* webpackChunkName: \"comp_base\" */ './Icon/index'),\n};\n\nconst baseCompsServices = {\n  $Dialog,\n  $Toast,\n};\n\nfunction install(vue) {\n  // STEP: 注册全局组件\n  Object.keys(baseComps).forEach((key, index) => vue.component(key, baseComps[key]));\n\n  // STEP: 直接调用法\n  Object.keys(baseCompsServices).forEach(key => {\n    // eslint-disable-next-line\n    vue.prototype[key] = baseCompsServices[key];\n  });\n}\n\nVue.use(install);\n\nexport default install;\n","/**\n * @name\n * NOTICE\n * - 每次调用生成一个实例\n * CANDO\n * - 支持富文本content\n * - 支持关闭所有实例\n * - 可配置是否再路由切换时消失\n */\n\nimport Vue from 'vue';\n\n// 组件\nimport Comp, { IDialogProps } from './comp/index';\n\ninterface ICompInstance extends IDialogProps, Vue {}\ninterface IDialogOptions {\n  show?: boolean;\n  title?: string;\n  content?: string;\n  type?: 'confirm' | 'alert';\n  okText?: string;\n  cancelText?: string;\n  ok?: (...args: any[]) => any;\n  cancel?: (...args: any[]) => any;\n  complete?: (...args: any[]) => any;\n}\n\nfunction generateMergeOptions(options: IDialogOptions) {\n  const mergeOptions: IDialogProps = {\n    show: true,\n  };\n\n  // @ts-ignore\n  ['title', 'content', 'type', 'okText', 'cancelText'].forEach((key: keyof IDialogProps) => {\n    // @ts-ignore\n    if (Object.hasOwnProperty.call(options, key) && options[key] !== undefined) {\n      // CANDO: 解决\n      // @ts-ignore\n      mergeOptions[key] = options[key];\n    }\n  });\n\n  return mergeOptions;\n}\n\nexport default function $dialog(options: IDialogOptions) {\n  // STEP: 创建 div 占位\n  // CANDO: 可以思考如果创建失败的情况\n  const el = document.createElement('div');\n  document.body.appendChild(el);\n\n  const ExtendVueComp = Vue.extend(Comp); // CANDO: 思考为什么 Comp 放这里会被替换掉\n  const compInstance = new ExtendVueComp(ExtendVueComp) as ICompInstance;\n  const removeInstance = () => {\n    compInstance.show = false;\n    compInstance.isClosing = true;\n    setTimeout(() => {\n      setTimeout(() => {\n        compInstance.$destroy();\n        try {\n          document.body.removeChild(compInstance.$el);\n        } catch (err) {\n          console.warn(err);\n        }\n      }, 600);\n    }, 0);\n  }; // 清楚实例\n\n  // CANDO: 思考更好的方法\n  // STEP: 替换配置\n  const mergeOptions = generateMergeOptions(options);\n  mergeOptions.eventOk = function ok() {\n    removeInstance();\n    if (options.ok) {\n      options.ok();\n    }\n    if (options.complete) {\n      options.complete();\n    }\n  };\n  mergeOptions.eventCancel = function ok() {\n    removeInstance();\n    if (options.cancel) {\n      options.cancel();\n    }\n    if (options.complete) {\n      options.complete();\n    }\n  };\n  Object.assign(compInstance, mergeOptions);\n\n  // STEP: 挂载组件\n  compInstance.$mount(el);\n\n  return compInstance;\n}\n","import { AxiosError } from 'axios';\n\nexport default function generateErrorMessage(error: AxiosError | Error) {\n  const { message } = error;\n  // eslint-disable-next-line prefer-destructuring\n  const response = (error as AxiosError).response;\n  // eslint-disable-next-line prefer-destructuring\n  const request = (error as AxiosError).request;\n\n  const resError = {\n    errMsg: '服务升级中(1)，请稍后尝试',\n    code: -1,\n    status: -1,\n    url: '',\n  };\n\n  if (response) {\n    // 服务器返回的错误\n    const { data, status = -1, config } = response;\n\n    // STEP: 设置状态\n    resError.status = status;\n\n    // STEP: 设置URL和状态\n    if (typeof config === 'object') {\n      const { url = '' } = config;\n      resError.url = url;\n    }\n\n    // STEP: 设置错误信息\n    if (status === 502 || status === 0) {\n      resError.errMsg = `服务器升级中，请刷新页面${status}`;\n    } else if (typeof data === 'object') {\n      const { msg, code = -1, errMsg } = data;\n      resError.errMsg = msg || errMsg || '服务升级中(2)，请稍后尝试';\n      resError.code = code;\n    } else if (data && typeof data === 'string') {\n      resError.errMsg = data;\n    }\n  } else if (request) {\n    resError.errMsg = '请求未成功';\n  } else {\n    resError.errMsg = message;\n  }\n\n  return resError;\n}\n","import Vue from 'vue';\n\n/**\n * @name 优化首屏加载中\n * 因为首屏白屏时间 = 加载html + 加载js + js处理\n * 而前面两个已经有了，但js处理没有\n * 原理：判断是否有router的name（说明进入到了页面） =》 定时覆盖当前的vue组件 =》 通过setTimeout(0)实现dom延迟 =》 筛选出页面的mounted\n * CANDO: 可以给meta一些判断，来决定是否要即刻（页面有任一组件加载完成了 ： 也说明这个页面已经可以看见了）关闭还是等页面加载完再关闭\n * ## 约定 ##\n *  1. 页面组件必须有id，否则会不会触发关闭loading事件\n *  2. 组件最好是class，或者用一层没有id的dom嵌套\n */\nlet _mountedTimer: null | NodeJS.Timeout = null;\nlet _mountedLoad = false;\n\nconst _appSetMountedHandle = () => {\n  _mountedLoad = true;\n  const dom = document.getElementById('page-loading');\n\n  if (dom) {\n    dom.style.display = 'none';\n  }\n};\n\nconst MixinMounted = {\n  mounted(this: Vue) {\n    if (!_mountedLoad && this.$route && this.$route.name && this.$el.id) {\n      if (_mountedTimer) {\n        clearTimeout(_mountedTimer);\n        _mountedTimer = null;\n      }\n\n      // CONDI: 针对首页快速优化\n      if (this.$route.meta.mounted_once) {\n        _appSetMountedHandle();\n      } else {\n        _mountedTimer = setTimeout(() => {\n          _appSetMountedHandle();\n        }, 0);\n      }\n    }\n  },\n};\n\nVue.mixin(MixinMounted);\n","import Vue from 'vue';\nimport App from './app';\n\n// 插件\nimport './plugins/composition-api';\nimport './plugins/router';\nimport './components/index';\nimport './plugins/appLoading';\n\n// 路由\nimport router from './router/index';\n\nexport default new Vue({\n  el: '#app',\n  router,\n  render: h => h(App),\n});\n","/* eslint-disable max-classes-per-file */\n\n/**\n * NAME: 验证表单格式\n */\n\nexport const formCheck = {\n  /**\n   * 验证手机号码\n   * @param {*} phone\n   */\n  phone(phone: string) {\n    const reg = /^1(([38]\\d)|(4[567])|(5[0-35-9])|(66)|(7[0-35-8])|(9[89]))\\d{8}$/;\n    return new Promise((resolve, reject) => {\n      if (phone.length === 11 && reg.test(phone)) {\n        resolve();\n      } else {\n        // eslint-disable-next-line prefer-promise-reject-errors\n        reject({\n          msg: '请输入正确的手机号',\n        });\n      }\n    });\n  },\n\n  /**\n   * 验证以太坊钱包地址\n   */\n  address(address: string) {\n    const reg = /^0x[0-9a-zA_Z]+$/i;\n    return new Promise((resolve, reject) => {\n      if (address.length === 42 && reg.test(address)) {\n        resolve();\n      } else {\n        // eslint-disable-next-line prefer-promise-reject-errors\n        reject({\n          func_msg: '请输入正确的以太坊钱包地址',\n        });\n      }\n    });\n  },\n\n  /**\n   * 验证邮箱地址\n   */\n  email(email: string) {\n    const reg = /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}$/;\n    return new Promise((resolve, reject) => {\n      if (email.length > 0 && reg.test(email)) {\n        resolve();\n      } else {\n        // eslint-disable-next-line prefer-promise-reject-errors\n        reject({\n          func_msg: '请输入正确的邮箱地址',\n        });\n      }\n    });\n  },\n\n  idNumber(idNumber: string) {\n    const reg = /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$|^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$/;\n    return new Promise((resolve, reject) => {\n      if (idNumber.length >= 14 && reg.test(idNumber)) {\n        resolve();\n      } else {\n        // eslint-disable-next-line prefer-promise-reject-errors\n        reject({\n          func_msg: '请输入正确的身份证号',\n        });\n      }\n    });\n  },\n};\n\nexport const handleLoadImg = (imgUrl: string) => {\n  if (!imgUrl) {\n    // eslint-disable-next-line prefer-promise-reject-errors\n    return Promise.reject({\n      msg: 'handleLoadImg: failed; noImg',\n    });\n  }\n\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      resolve();\n    };\n    img.onerror = err => {\n      // eslint-disable-next-line prefer-promise-reject-errors\n      reject({\n        msg: 'handleLoadImg: failed',\n        err,\n      });\n    };\n    img.src = imgUrl;\n  });\n};\n\n// NEW\nconst sleep = (duration = 0) => new Promise(resolve => setTimeout(resolve, duration));\n\nexport { sleep };\n","module.exports = Vue;","import { provide } from '@vue/composition-api';\nimport VueRouter, { Route, RawLocation } from 'vue-router';\nimport Router from '../router/index';\n\ninterface IRouteInfo {\n  to: Route;\n  from: Route;\n}\n\nconst RouterSymbol = Symbol('router');\n// NOTICE: 暂不支持多实例\nlet routerInst: null | VueRouter;\nlet currentRouteExtraInfo: IRouteInfo | null = null;\n\n// STEP: 监听路由\nconst onBeforeRouteEntry: (\n  to: Route,\n  from: Route,\n  next: (to?: RawLocation | false | ((vm: Vue) => any) | void) => void,\n) => void = (to, from, next) => {\n  currentRouteExtraInfo = {\n    to,\n    from,\n  };\n  next();\n};\n\nRouter.beforeEach(onBeforeRouteEntry);\n\nconst useRouterProvider = (router: VueRouter) => {\n  routerInst = router;\n  provide(RouterSymbol, router);\n};\n\nconst useRouter: () => {\n  router: VueRouter | null;\n  currentRouteExtraInfo: IRouteInfo | null;\n} = () => {\n  if (!routerInst) {\n    console.warn('请先注册路由');\n  }\n\n  return { router: routerInst || null, currentRouteExtraInfo: currentRouteExtraInfo || null };\n};\n\nexport { useRouterProvider };\nexport default useRouter;\n","import { sleep } from './utils';\n\ninterface TokenHandleDebugApiResData {\n  token: string;\n  // eslint-disable-next-line camelcase\n  token_expire: number;\n}\ninterface TokenHandleSaveTokenPayload extends TokenHandleDebugApiResData {\n  tokenKey: string;\n}\ninterface TokenHandleInitPayload {\n  tokenKey: string;\n  isDebug: boolean;\n  getDebugToken: (...args: any[]) => Promise<TokenHandleDebugApiResData>;\n  getToken: (...args: any[]) => Promise<TokenHandleDebugApiResData>;\n}\n\ninterface TokenHandleTokenItem {\n  tokenKey: string;\n  token: string;\n  tokenExpire: number;\n}\n\nclass TokenHandle {\n  private storage = window.localStorage;\n\n  private isHandling = false;\n\n  private getDebugTokenFn: ((...args: any[]) => Promise<TokenHandleDebugApiResData>) | undefined;\n\n  private getTokenFn: ((...args: any[]) => Promise<TokenHandleDebugApiResData>) | undefined;\n\n  public async init(payload: TokenHandleInitPayload): Promise<void> {\n    const { tokenKey = '', isDebug = false, getDebugToken, getToken } = payload;\n\n    this.getDebugTokenFn = getDebugToken;\n    this.getTokenFn = getToken;\n\n    if (this.isHandling) {\n      await sleep(100);\n      return this.init(payload);\n    }\n\n    this.isHandling = true;\n\n    try {\n      if (isDebug) {\n        await this.initDebugToken(tokenKey);\n      } else {\n        await this.initWxToken(tokenKey);\n      }\n    } catch (err) {\n      return Promise.reject(err);\n    } finally {\n      this.isHandling = false;\n    }\n\n    return Promise.resolve();\n  }\n\n  public async getToken(tokenKey: string): Promise<null | string> {\n    const tokenInfo = await this.getTokenInfo();\n\n    let tokenRes = null;\n\n    const tokenItem = tokenInfo.find(item => item.tokenKey === tokenKey);\n    if (tokenItem) {\n      tokenRes = tokenItem.token;\n    }\n\n    return Promise.resolve(tokenRes);\n  }\n\n  public hasToken(tokenKey: string) {\n    return this.getToken(tokenKey);\n  }\n\n  public async clearToken(tokenKey: string) {\n    const tokenInfo = await this.getTokenInfo();\n\n    const tokenItemIndex = tokenInfo.findIndex(item => item.tokenKey === tokenKey);\n    if (tokenItemIndex !== undefined) {\n      tokenInfo.splice(tokenItemIndex, 1);\n    }\n\n    this.setStorageItem('tokenInfo', tokenInfo);\n\n    return Promise.resolve();\n  }\n\n  public clearAllToken() {\n    this.removeStorageItem('tokenInfo');\n    return Promise.resolve();\n  }\n\n  private removeStorageItem(key: string) {\n    this.storage.removeItem(key);\n  }\n\n  private async getTokenInfo() {\n    let localTokenInfo = (await this.getStorageItem('tokenInfo')) || [];\n    localTokenInfo = Object.hasOwnProperty.call(localTokenInfo, 'length') ? localTokenInfo : [];\n    const tokenInfo = (localTokenInfo || []) as TokenHandleTokenItem[];\n    return Promise.resolve(tokenInfo);\n  }\n\n  private async saveToken(\n    payload: TokenHandleSaveTokenPayload = {\n      tokenKey: '',\n      token: '',\n      token_expire: +new Date() + 2 * 60 * 60 * 1000,\n    },\n  ) {\n    const { tokenKey, token, token_expire: tokenExpire } = payload;\n    const tokenItem = {\n      tokenKey,\n      tokenExpire,\n      token,\n    };\n\n    // STEP: 获取本地数据库\n    // TODO: 思考为什么会设置 {}\n    const tokenInfo = await this.getTokenInfo();\n\n    // STEP: 替换或新增key\n    const tokenItemIdx = tokenInfo.findIndex(item => item.tokenKey === tokenKey);\n    if (tokenItemIdx > -1) {\n      tokenInfo[tokenItemIdx] = tokenItem;\n    } else {\n      tokenInfo.push(tokenItem);\n    }\n\n    // STEP: 储存到本地\n    await this.setStorageItem('tokenInfo', tokenInfo);\n\n    return Promise.resolve();\n  }\n\n  private setStorageItem(key: string, value: any): Promise<void> {\n    let saveValue = value;\n    if (typeof value === 'object') {\n      saveValue = JSON.stringify(value);\n    }\n\n    this.storage.setItem(key, saveValue);\n\n    return Promise.resolve();\n  }\n\n  private getStorageItem(key: string): Promise<string | object | null> {\n    let item = this.storage.getItem(key);\n\n    if (item) {\n      try {\n        item = JSON.parse(item);\n      } catch (err) {\n        console.warn(err);\n      }\n    }\n\n    return Promise.resolve(item);\n  }\n\n  private async initDebugToken(tokenKey: string) {\n    // STEP: 通过接口获取token\n    if (this.getDebugTokenFn) {\n      const res = await this.getDebugTokenFn();\n\n      // STEP: 存入本地\n      await this.saveToken({ ...res, tokenKey });\n    }\n\n    // STEP: 返回成功\n    return Promise.resolve();\n  }\n\n  private async initWxToken(tokenKey: string) {\n    // STEP: 通过接口获取token\n    if (this.getTokenFn) {\n      const res = await this.getTokenFn();\n\n      // STEP: 存入本地\n      await this.saveToken({ ...res, tokenKey });\n    }\n\n    // STEP: 返回成功\n    return Promise.resolve();\n  }\n}\n\nconst tokenHandle = new TokenHandle();\n\nexport default tokenHandle;\n","const commonRoutes = [\n  {\n    name: 'Home',\n    path: '/',\n    meta: {\n      mounted_once: true,\n    },\n    component: () => import(/* webpackChunkName: \"home\" */ '../view/home/index'),\n  },\n  {\n    path: '/auth',\n    name: 'Auth',\n    meta: {\n      noNeedAuth: true,\n    },\n    component: () => import(/* webpackChunkName: \"auth\" */ '../view/auth/index'),\n  },\n  {\n    path: '/auth/clear',\n    name: 'AuthClear',\n    meta: {\n      noNeedAuth: true,\n    },\n    component: () => import(/* webpackChunkName: \"auth\" */ '../view/auth/clear'),\n  },\n  {\n    path: '/*',\n    redirect: {\n      name: 'Home',\n    },\n  },\n];\n\nexport default [...commonRoutes];\n","import VueRouter, { Route, RawLocation } from 'vue-router';\nimport routes from './routes';\n\n// Hooks\nimport useChannelInfoHook from '../hooks/useChannelInfo';\nimport useGlobalUserInfoHook from '../hooks/useGlobalUserInfo';\n\n// Libs\n// import { initWechatJavascriptSDK, initWechatShare } from './func';\nimport tokenHandle from '../libs/token';\nimport { initAuthToken } from '../libs/auth';\n\nconst router = new VueRouter({\n  routes,\n});\n\n// 路由进入前\nconst onBeforeRouterEnter: (\n  to: Route,\n  from: Route,\n  next: (to?: RawLocation | false | ((vm: Vue) => any) | void) => void,\n) => void = async (to, from, next) => {\n  // const { getState: getUserInfoState, hasInit, initUserInfo } = useGlobalUserInfoHook();\n  // const {\n  //   getState: getChannelInfoState,\n  //   hasInit: hasInitChannelInfo,\n  //   initChannelInfoInfo,\n  // } = useChannelInfoHook();\n  // let channelInfo = getChannelInfoState();\n\n  // // STEP: 获取平台信息\n  // if (!hasInitChannelInfo) {\n  //   await initChannelInfoInfo();\n  //   channelInfo = getChannelInfoState();\n  // }\n\n  // // STEP: 无需授权 => 直接进入\n  // if (to.meta.noNeedAuth) {\n  //   next();\n  //   return;\n  // }\n\n  // // STEP: 未授权 => 进行授权\n  // const hasToken = await tokenHandle.hasToken(channelInfo.key);\n\n  // if (!hasToken) {\n  //   await initAuthToken(channelInfo.key);\n  // }\n\n  // // STEP: 没有用户信息 => 获取用户信息 和 钱包信息\n  // if (!hasInit) {\n  //   const getAllData = () => Promise.all([initUserInfo()]);\n  //   await getAllData();\n  // }\n\n  // // STEP: 获取最新值\n  // const userInfo = getUserInfoState();\n  // console.info(userInfo);\n\n  // // STEP: 特殊逻辑处理\n\n  next();\n};\n\n// 路由进入后事件\nconst onAfterRouterEnter: (to: Route, from: Route) => any = to => {\n  // // STEP: 配置 WX SDK\n  // initWechatJavascriptSDK({\n  //   success: () => {\n  //     initWechatShare();\n  //   },\n  // });\n\n  // STEP: 设置网页标题\n  if (Object.hasOwnProperty.call(to.meta, 'title')) {\n    document.title = to.meta.title;\n  }\n};\n\nrouter.beforeEach(onBeforeRouterEnter);\nrouter.afterEach(onAfterRouterEnter);\n\nexport default router;\n","Object.defineProperty(exports, '__esModule', {\n  value: true,\n});\n\nexports.default = {\n  APP: {\n    APP_ID: 'wx7697ae60dcd26a61',\n    APP_KEY: 'default',\n  },\n  PROJECT_INFO: {\n    NAME: 'DEMO',\n    DESC: '',\n    LOGO: '',\n  },\n  SHARE_INFO_BASE: {\n    title: 'DEMO',\n    desc: '',\n    link: '',\n    imgUrl: '',\n  },\n  BASE_URL: 'https://cet1.airdropx.top',\n  IS_DEBUG: true,\n  DEBUG_USER_ID: 2,\n  JS_API_LIST: [\n    'uploadImage',\n    'chooseImage',\n    'showMenuItems', // 显示指定菜单项\n    'hideMenuItems', // 隐藏菜单\n    'hideAllNonBaseMenuItem', //  隐藏菜单\n    'showAllNonBaseMenuItem', //  显示菜单\n    'updateAppMessageShareData', // 新版【app】分享\n    'previewImage', // 【预览图片】\n    'updateTimelineShareData', // 新版【朋友圈分享】\n    'onMenuShareTimeline', // 显示「分享到朋友圈」菜单项\n    'onMenuShareAppMessage', // 显示「分享给好友」菜单项\n    'onMenuShareQQ', // 显示「分享给qq好友」菜单项\n    'onMenuShareWeibo', // 显示「分享到微博」菜单项\n    'onMenuShareQZone', // 显示「分享到QQ空间」菜单项\n  ],\n};\n","module.exports = (__webpack_require__(104))(12);"],"sourceRoot":""}