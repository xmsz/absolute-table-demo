(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{104:function(e,t){e.exports=vendor_d150f6212419702afdcd},114:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n.n(r),a=n(1),c=(n(38),n(51),n(9),n(0)),s=n.n(c),i=(n(12),n(2)),u=n(84),l=n.n(u),f=(n(73),n(37),n(88),n(16),n(85),n(56)),p=n.n(f),v=n(34);var d,h,b=n(33),m=(n(113),navigator.userAgent.toLowerCase()),g=(d=m.match(/MicroMessenger/i),h=!1,d&&"micromessenger"===d[0].toLocaleLowerCase()&&(h=!0),function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.get("/platform/info");case 3:return t=e.sent,e.abrupt("return",Promise.resolve(t.data));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),k=n(22),O=Symbol("ChannelInfo"),y={appid:"",key:"default",qrcode:""},w=!1,j=!1,x=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=4;break}return e.next=3,Object(k.a)(100);case 3:return e.abrupt("return",x());case 4:if(j=!0,w){e.next=20;break}return e.prev=6,e.next=9,g();case 9:t=e.sent,Object.assign(y,t),w=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.warn(e.t0);case 17:return e.prev=17,j=!1,e.finish(17);case 20:return e.abrupt("return",Promise.resolve());case 21:case"end":return e.stop()}}),e,null,[[6,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),I=function(){w=!1,x()},T=function(){return{state:y,hasInit:w,initChannelInfoInfo:x,reloadChannelInfoInfo:I,getState:function(){return JSON.parse(JSON.stringify(y))}}},S=(p.a.IS_DEBUG,p.a.DEBUG_USER_ID,function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.getToken(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,r,o,a,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{platformKey:""},r=n.platformKey,o=t,e.next=6,S(r);case 6:return(a=e.sent)&&(o.headers.Authorization="Bearer ".concat(a)),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=null,E=function(e){C&&(clearTimeout(C),C=null),C=setTimeout((function(){var t=Object(b.a)().router;if(function(e){v.a.clearToken(e)}(e),t){var n,r,o,a,c,s;"Auth"!==t.currentRoute.name&&t.replace({name:"Auth",query:{currentRoute:(n=t.currentRoute,r=n.name,o=n.query,a=n.params,c=n.fullPath,s=n.path,encodeURIComponent(JSON.stringify({name:r,query:o,params:a,fullPath:c,path:s})))}})}}),0)};var M=l.a.create({baseURL:"/api/"}),D=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r,o,a,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H(),r=n.getState,o=T(),a=o.getState,c=r(),i=a(),e.next=6,P(t,{platformKey:i.key});case 6:return(u=e.sent).params||(u.params={}),u.params.u||(u.params.u=c.id),u.params.p||(u.params.p=i.appid),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();M.interceptors.request.use(D),M.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){var t,n=(0,T().getState)();return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&E(n.key),Promise.reject(e)}));var A=M;function _(){return B.apply(this,arguments)}function B(){return(B=Object(i.a)(s.a.mark((function e(){var t,n,r,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t,e.prev=2,e.next=5,A.get("/user/info",{params:n});case 5:return r=e.sent,e.abrupt("return",Promise.resolve(r.data));case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var N=Symbol("globalUserInfo"),U={id:0,nickname:"",avatar:"",invite_code:"",subscribe:!0},F=!1,K=!1,$=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=4;break}return e.next=3,Object(k.a)(100);case 3:return e.abrupt("return",$());case 4:if(K=!0,F){e.next=20;break}return e.prev=6,e.next=9,_();case 9:t=e.sent,Object.assign(U,t),F=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.warn(e.t0);case 17:return e.prev=17,K=!1,e.finish(17);case 20:return e.abrupt("return",Promise.resolve());case 21:case"end":return e.stop()}}),e,null,[[6,14,17,20]])})));return function(){return e.apply(this,arguments)}}();function J(){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,Object.assign(U,t),e.abrupt("return",Promise.resolve());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(){return{state:U,hasInit:F,initUserInfo:$,reloadUserInfo:J,getState:function(){return JSON.parse(JSON.stringify(U))}}},L=(n(114),Object(a.c)({name:"App",setup:function(e,t){return U=Object(a.g)(U),Object(a.f)(N,{state:U,initUserInfo:$}),Object(b.b)(t.root.$router),y=Object(a.g)(y),Object(a.f)(O,{state:y}),function(){return Object(a.a)("div",{attrs:{id:"app"}},[Object(a.a)("router-view")])}}}));o.a.use(a.b);var q=n(35);o.a.use(q.a);n(55),n(89),n(115),n(117);var G=Object(a.c)({props:{show:Boolean,title:String,okText:String,cancelText:String,type:String,content:String,eventOk:Function,eventCancel:Function,isClosing:Boolean},setup:function(e,t){var n=Object(a.g)({visible:!1});function r(){e.eventCancel&&e.eventCancel()}function o(){e.eventOk&&e.eventOk()}function c(e){e.preventDefault()}return Object(a.h)((function(){return e.show}),(function(e){setTimeout((function(){"boolean"==typeof e&&n.visible!==e&&(n.visible=e)}),0)})),function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(a.a)("div",{class:"com-dialog-button cancel ".concat(t),on:{click:r}},[e.cancelText||"取消"])}var s=Object(a.a)("div",{class:"com-dialog-box"},[Object(a.a)("div",{class:"com-dialog-title"},[e.title||""]),e.content?Object(a.a)("div",{class:"com-dialog-content",domProps:{innerHTML:e.content}}):Object(a.a)("div",{class:"com-dialog-content"},[t.slots.default&&t.slots.default()]),Object(a.a)("div",{class:"com-dialog-footer"},["confirm"===e.type&&n("first"),Object(a.a)("div",{class:"com-dialog-button submit",on:{click:o}},[e.okText||"确定"]),"confirm"===e.type&&n("second")])]);return Object(a.a)("div",{class:"com-dialog ".concat(e.isClosing?"fade-leave-active":""),on:{touchmove:c}},[Object(a.a)("div",{class:"com-dialog-mask"}),s])}}});n(118);var Q=n(17);n(81),n(119);var W=Object(a.c)({props:{show:Boolean,title:String,content:String,type:String,showClose:Boolean,showIcon:Boolean,eventClose:Function,isClosing:Boolean,disableBgClose:Boolean},setup:function(e,t){var n=Object(a.g)({visible:!1});function r(){e.eventClose&&e.eventClose()}function o(e){e.preventDefault()}return Object(a.h)((function(){return e.show}),(function(e){setTimeout((function(){"boolean"==typeof e&&n.visible!==e&&(n.visible=e)}),0)})),function(){return Object(a.a)("div",[Object(a.a)("div",{class:"com-toast ".concat(e.isClosing?"fade-leave-active":""),on:{touchmove:o}},[Object(a.a)("i",{class:"mask",on:{click:function(){e.disableBgClose||r()}}}),Object(a.a)("section",{class:"box ".concat(e.showIcon?"":"no-icon"," ").concat(e.content?"":"no-content"," ").concat("loading"===e.type?"loading":""," ").concat("warn"===e.type?"warn":""," ").concat("error"===e.type?"error":""," ").concat("done"===e.type?"done":"","\n       ")},[e.showIcon&&Object(a.a)("i",{class:"icon ".concat("loading"===e.type?"base-icon-font-loading":""," ").concat("warn"===e.type?"base-icon-font-info":""," ").concat("error"===e.type?"base-icon-font-warn":""," ").concat("done"===e.type?"base-icon-font-done'":"")}),Object(a.a)("div",{class:"text"},[Object(a.a)("b",{class:"title"},[e.title]),e.content?Object(a.a)("div",{class:"desc",domProps:{innerHTML:e.content}}):Object(a.a)("div",{class:"desc"},[t.slots.default&&t.slots.default()])]),e.showClose&&Object(a.a)("button",{class:"btn-close",on:{click:r}},[Object(a.a)("i",{class:"btn-close-icon base-icon-font-close"})])])])])}}}),z=1,V=[];function Y(e){e.show=!1,e.isClosing=!0,setTimeout((function(){setTimeout((function(){e.$destroy();try{document.body.removeChild(e.$el)}catch(e){console.warn(e)}}),600)}),0)}function Z(e){for(var t=0,n=V.length;t<n;t+=1)if(V[t].id===e){Y(V[t].inst);break}}function X(e){var t=document.createElement("div");document.body.appendChild(t);var n=o.a.extend(W),r=new n(n),a=z;z+=1;var c=function(e){var t={show:!0};return["title","content","type","showClose","showIcon","disableBgClose"].forEach((function(n){Object.hasOwnProperty.call(e,n)&&void 0!==e[n]&&(t[n]=e[n])})),t}(e);return c.eventClose=function(){Z(a),e.eventClose&&e.eventClose()},Object.assign(r,c),r.$mount(t),{inst:r,id:a}}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=e,o=-1;"string"==typeof t?r.title=t:r=Object.assign(r,t);var a=X(r);return V.push(a),"object"===Object(Q.a)(t)&&Object.hasOwnProperty.call(t,"duration")?o=t.duration:n&&(o=n),o>0&&setTimeout((function(){Z(a.id)}),o),{close:function(){Z(a.id)}}}var te={},ne={$Dialog:function(e){var t=document.createElement("div");document.body.appendChild(t);var n=o.a.extend(G),r=new n(n),a=function(){r.show=!1,r.isClosing=!0,setTimeout((function(){setTimeout((function(){r.$destroy();try{document.body.removeChild(r.$el)}catch(e){console.warn(e)}}),600)}),0)},c=function(e){var t={show:!0};return["title","content","type","okText","cancelText"].forEach((function(n){Object.hasOwnProperty.call(e,n)&&void 0!==e[n]&&(t[n]=e[n])})),t}(e);return c.eventOk=function(){a(),e.ok&&e.ok(),e.complete&&e.complete()},c.eventCancel=function(){a(),e.cancel&&e.cancel(),e.complete&&e.complete()},Object.assign(r,c),r.$mount(t),r},$Toast:{loading:function(e,t){return ee({title:"",showIcon:!0,type:"loading",disableBgClose:!0},e,t)},warn:function(e,t){return ee({title:"",showIcon:!0,type:"warn"},e,t)},error:function(e,t){return ee({title:"",showIcon:!0,type:"error"},e,t)},byError:function(e){var t=function(e){var t=e.message,n=e.response,r=e.request,o={errMsg:"服务升级中(1)，请稍后尝试",code:-1,status:-1,url:""};if(n){var a=n.data,c=n.status,s=void 0===c?-1:c,i=n.config;if(o.status=s,"object"===Object(Q.a)(i)){var u=i.url,l=void 0===u?"":u;o.url=l}if(502===s||0===s)o.errMsg="服务器升级中，请刷新页面".concat(s);else if("object"===Object(Q.a)(a)){var f=a.msg,p=a.code,v=void 0===p?-1:p,d=a.errMsg;o.errMsg=f||d||"服务升级中(2)，请稍后尝试",o.code=v}else a&&"string"==typeof a&&(o.errMsg=a)}else o.errMsg=r?"请求未成功":t;return o}(e),n=t.code,r=t.url;return ee({title:"",showIcon:!0,showClose:!0,type:"error"},{title:t.errMsg,content:["<details class='details'>","<summary class='summary'>展开详细错误</summary>",n?"<p class='p'>错误代码：".concat(n,"</p>"):"","<p class='p'>错误来源：".concat(r,"</p>"),"</details>"].join("")})},close:Z,closeAll:function(){V.forEach((function(e){Y(e.inst)}))}}};function re(e){Object.keys(te).forEach((function(t,n){return e.component(t,te[t])})),Object.keys(ne).forEach((function(t){e.prototype[t]=ne[t]}))}o.a.use(re);var oe=null,ae=!1,ce=function(){ae=!0;var e=document.getElementById("page-loading");e&&(e.style.display="none")},se={mounted:function(){!ae&&this.$route&&this.$route.name&&this.$el.id&&(oe&&(clearTimeout(oe),oe=null),this.$route.meta.mounted_once?ce():oe=setTimeout((function(){ce()}),0))}};o.a.mixin(se);var ie=n(36);t.default=new o.a({el:"#app",router:ie.a,render:function(e){return e(L)}})},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(9),n(16);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}},3:function(e,t){e.exports=Vue},33:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n(38),n(51),n(9);var r,o=n(1),a=n(36),c=Symbol("router"),s=null;a.a.beforeEach((function(e,t,n){s={to:e,from:t},n()}));var i=function(e){r=e,Object(o.f)(c,e)};t.a=function(){return r||console.warn("请先注册路由"),{router:r||null,currentRouteExtraInfo:s||null}}},34:function(e,t,n){"use strict";n(109),n(110),n(111),n(112),n(9);var r=n(57),o=n(17),a=n(0),c=n.n(a),s=(n(12),n(2)),i=n(86),u=n(87),l=n(18),f=n(22),p=new(function(){function e(){Object(i.a)(this,e),Object(l.a)(this,"storage",window.localStorage),Object(l.a)(this,"isHandling",!1),Object(l.a)(this,"getDebugTokenFn",void 0),Object(l.a)(this,"getTokenFn",void 0)}var t,n,a,p,v,d,h;return Object(u.a)(e,[{key:"init",value:(h=Object(s.a)(c.a.mark((function e(t){var n,r,o,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tokenKey,r=void 0===n?"":n,o=t.isDebug,a=void 0!==o&&o,s=t.getDebugToken,i=t.getToken,this.getDebugTokenFn=s,this.getTokenFn=i,!this.isHandling){e.next=7;break}return e.next=6,Object(f.a)(100);case 6:return e.abrupt("return",this.init(t));case 7:if(this.isHandling=!0,e.prev=8,!a){e.next=14;break}return e.next=12,this.initDebugToken(r);case 12:e.next=16;break;case 14:return e.next=16,this.initWxToken(r);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(8),e.abrupt("return",Promise.reject(e.t0));case 21:return e.prev=21,this.isHandling=!1,e.finish(21);case 24:return e.abrupt("return",Promise.resolve());case 25:case"end":return e.stop()}}),e,this,[[8,18,21,24]])}))),function(e){return h.apply(this,arguments)})},{key:"getToken",value:(d=Object(s.a)(c.a.mark((function e(t){var n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTokenInfo();case 2:return n=e.sent,r=null,(o=n.find((function(e){return e.tokenKey===t})))&&(r=o.token),e.abrupt("return",Promise.resolve(r));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"hasToken",value:function(e){return this.getToken(e)}},{key:"clearToken",value:(v=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTokenInfo();case 2:return n=e.sent,void 0!==(r=n.findIndex((function(e){return e.tokenKey===t})))&&n.splice(r,1),this.setStorageItem("tokenInfo",n),e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"clearAllToken",value:function(){return this.removeStorageItem("tokenInfo"),Promise.resolve()}},{key:"removeStorageItem",value:function(e){this.storage.removeItem(e)}},{key:"getTokenInfo",value:(p=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStorageItem("tokenInfo");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,t=Object.hasOwnProperty.call(t,"length")?t:[],n=t||[],e.abrupt("return",Promise.resolve(n));case 9:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"saveToken",value:(a=Object(s.a)(c.a.mark((function e(){var t,n,r,o,a,s,i,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{tokenKey:"",token:"",token_expire:+new Date+72e5},n=t.tokenKey,r=t.token,o=t.token_expire,a={tokenKey:n,tokenExpire:o,token:r},e.next=5,this.getTokenInfo();case 5:return s=e.sent,(i=s.findIndex((function(e){return e.tokenKey===n})))>-1?s[i]=a:s.push(a),e.next=10,this.setStorageItem("tokenInfo",s);case 10:return e.abrupt("return",Promise.resolve());case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setStorageItem",value:function(e,t){var n=t;return"object"===Object(o.a)(t)&&(n=JSON.stringify(t)),this.storage.setItem(e,n),Promise.resolve()}},{key:"getStorageItem",value:function(e){var t=this.storage.getItem(e);if(t)try{t=JSON.parse(t)}catch(e){console.warn(e)}return Promise.resolve(t)}},{key:"initDebugToken",value:(n=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getDebugTokenFn){e.next=6;break}return e.next=3,this.getDebugTokenFn();case 3:return n=e.sent,e.next=6,this.saveToken(Object(r.a)({},n,{tokenKey:t}));case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"initWxToken",value:(t=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getTokenFn){e.next=6;break}return e.next=3,this.getTokenFn();case 3:return n=e.sent,e.next=6,this.saveToken(Object(r.a)({},n,{tokenKey:t}));case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}());t.a=p},36:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=(n(12),n(2)),c=n(35),s=(n(81),n(9),[].concat([{name:"Home",path:"/",meta:{mounted_once:!0},component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,123))}},{path:"/auth",name:"Auth",meta:{noNeedAuth:!0},component:function(){return n.e(2).then(n.bind(null,124))}},{path:"/auth/clear",name:"AuthClear",meta:{noNeedAuth:!0},component:function(){return n.e(2).then(n.bind(null,125))}},{path:"/*",redirect:{name:"Home"}}])),i=new c.a({routes:s}),u=function(){var e=Object(a.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();i.beforeEach(u),i.afterEach((function(e){Object.hasOwnProperty.call(e.meta,"title")&&(document.title=e.meta.title)}));t.a=i},56:function(e,t,n){n(108),Object.defineProperty(t,"__esModule",{value:!0}),t.default={APP:{APP_ID:"wx7697ae60dcd26a61",APP_KEY:"default"},PROJECT_INFO:{NAME:"DEMO",DESC:"",LOGO:""},SHARE_INFO_BASE:{title:"DEMO",desc:"",link:"",imgUrl:""},BASE_URL:"https://cet1.airdropx.top",IS_DEBUG:!0,DEBUG_USER_ID:2,JS_API_LIST:["uploadImage","chooseImage","showMenuItems","hideMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","updateAppMessageShareData","previewImage","updateTimelineShareData","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}},84:function(e,t,n){e.exports=n(104)(12)}},[[120,4,0]]]);
//# sourceMappingURL=app.086e284207b2ec450a56.js.map